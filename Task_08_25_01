import pandas as pd
import matplotlib.pyplot as plt

# Criar o dataset (simulação de CSV carregado)
data = {
    "id_cliente": [1,2,3,4,5,6,7,8,9,10],
    "idade": [23,45,31,52,29,40,35,48,27,50],
    "renda_mensal": [2500,8000,4000,12000,3000,6000,3500,9000,2800,11000],
    "valor_emprestimo": [5000,20000,10000,15000,7000,12000,5000,22000,6000,18000],
    "atraso_pagamento": [1,0,0,0,1,0,1,0,1,0]
}

df = pd.DataFrame(data)

# 1. Mostrar os primeiros registros
print("📊 Primeiras linhas do dataset:")
print(df.head())

# 2. Média de renda mensal dos clientes
print("\n💰 Renda média mensal:", df["renda_mensal"].mean())

# 3. Taxa de atraso geral
print("\n⚠️ Taxa de atraso (%):", df["atraso_pagamento"].mean() * 100)

# 4. Comparar renda média entre clientes com e sem atraso
print("\n📉 Renda média por grupo (0 = sem atraso, 1 = com atraso):")
print(df.groupby("atraso_pagamento")["renda_mensal"].mean())

# 5. Visualizar com gráfico
df.groupby("atraso_pagamento")["renda_mensal"].mean().plot(kind="bar", color=["green","red"])
plt.title("Renda média x Atraso no pagamento")
plt.xlabel("Atraso Pagamento (0=Não, 1=Sim)")
plt.ylabel("Renda Média (R$)")
plt.show()
